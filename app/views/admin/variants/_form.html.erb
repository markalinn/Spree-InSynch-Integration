<div class="yui-gb">
  <div class="yui-u first">

    <% @product.options.each do |option| %>
      <p>
        <%= label :new_variant, option.option_type.presentation %><br />
        <% if @variant.new_record? %>
          <%= select(:new_variant, option.option_type.presentation,
            option.option_type.option_values.collect {|ov| [ ov.presentation, ov.id ] },
            {})
          %>
        <% else %>
          <% opt = @variant.option_values.detect {|o| o.option_type == option.option_type }.presentation %>
          <%= text_field(:new_variant,  option.option_type.presentation, :value => opt, :disabled => 'disabled') %>
        <% end %>
      </p>
    <% end %>

      <p>
        <%= f.label :sku, t("sku") %><br />
      <% 
      	@mas_products = MasProduct.all(:order => 'ItemNumber')
      	@existing_products = MasProduct.all(:joins => :product, :conditions => ["ItemNumber <> ? and products.deleted_at is NULL",@product.sku])
      	@new_products = @mas_products - @existing_products
      %>
        <%= f.collection_select :sku, @new_products, :ItemNumber, :ItemNumber, :prompt => '-Unassigned-' %>
      </p>
    <%= f.hidden_field :price, :value => 1.0 %>

  </div>
</div>
